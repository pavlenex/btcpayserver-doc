(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{642:function(e,t,a){e.exports=a.p+"assets/img/Sequence.94c7564b.svg"},773:function(e,t,a){"use strict";a.r(t);var r=a(35),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[r("a",{attrs:{href:"https://www.nuget.org/packages/BTCPayServer.Hwi",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://img.shields.io/nuget/v/BTCPayServer.Hwi.svg",alt:"NuGet"}}),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://github.com/btcpayserver/BTCPayServer.Vault/actions?query=workflow%3ACI",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://github.com/btcpayserver/BTCPayServer.Vault/workflows/CI/badge.svg",alt:"Build status"}}),r("OutboundLink")],1)]),e._v(" "),r("h1",{attrs:{id:"btcpayservervault"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#btcpayservervault"}},[e._v("#")]),e._v(" BTCPayServer.Vault")]),e._v(" "),r("p",[e._v("This project is composed of two parts:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/btcpayserver/BTCPayServer.Vault/tree/master/BTCPayServer.Hwi",target:"_blank",rel:"noopener noreferrer"}},[e._v("BTCPayServer.Hwi"),r("OutboundLink")],1),e._v(": An easy to use library ("),r("a",{attrs:{href:"https://www.nuget.org/packages/BTCPayServer.Hwi",target:"_blank",rel:"noopener noreferrer"}},[e._v("nuget"),r("OutboundLink")],1),e._v(") wrapping the command line interface of the "),r("a",{attrs:{href:"https://github.com/bitcoin-core/HWI",target:"_blank",rel:"noopener noreferrer"}},[e._v("hwi project"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/btcpayserver/BTCPayServer.Vault/tree/master/BTCPayServer.Vault",target:"_blank",rel:"noopener noreferrer"}},[e._v("BTCPayServer.Vault"),r("OutboundLink")],1),e._v(": A simple local web server providing access to the hardware wallet physically connected to your computer via hwi.")])]),e._v(" "),r("h2",{attrs:{id:"why-btcpayserver-vault"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#why-btcpayserver-vault"}},[e._v("#")]),e._v(" Why BTCPayServer Vault")]),e._v(" "),r("p",[e._v("BTCPayServer Vault allows web applications to access your hardware wallet, this enables a better integrated user experience.")]),e._v(" "),r("h2",{attrs:{id:"how-to-install"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how-to-install"}},[e._v("#")]),e._v(" How to install")]),e._v(" "),r("h3",{attrs:{id:"direct-download"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#direct-download"}},[e._v("#")]),e._v(" Direct download")]),e._v(" "),r("p",[e._v("The binaries are on our "),r("a",{attrs:{href:"https://github.com/btcpayserver/BTCPayServer.Vault/releases/latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("release page"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h3",{attrs:{id:"via-brew-macos-only"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#via-brew-macos-only"}},[e._v("#")]),e._v(" Via brew (macOS only)")]),e._v(" "),r("p",[e._v("You can use brew:")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("brew "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" btcpayserver-vault\n")])])]),r("h2",{attrs:{id:"how-does-btcpayserver-vault-work"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how-does-btcpayserver-vault-work"}},[e._v("#")]),e._v(" How does BTCPayServer Vault work")]),e._v(" "),r("p",[e._v("When running the BTCPayServer Vault, a local webserver is hosted on "),r("code",[e._v("http://127.0.0.1:65092")]),e._v(" which web applications, via your local browser, can connect to in order to interact with your hardware wallet.")]),e._v(" "),r("p",[e._v("The protocol is fairly simple:")]),e._v(" "),r("p",[e._v("First, the web application needs to make a permission request to the Vault by sending a HTTP request "),r("code",[e._v("GET")]),e._v(" to "),r("code",[e._v("http://127.0.0.1:65092/hwi-bridge/v1/request-permission")])]),e._v(" "),r("p",[e._v("This will prompt the user to grant access to the web application and if the user accepts, the request returns HTTP 200. Note that internally, the Vault relies on the "),r("code",[e._v("ORIGIN")]),e._v(" HTTP header to identify the web application requesting access.\nIf the access was granted previously, the request returns HTTP 200.")]),e._v(" "),r("p",[e._v("Second, the web application can query the hardware through "),r("code",[e._v("POST")]),e._v(" requests to "),r("code",[e._v("http://127.0.0.1:65092/hwi-bridge/v1")]),e._v(".")]),e._v(" "),r("div",{staticClass:"language-json extra-class"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v('"params"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"param1"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"param2"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),r("p",[e._v("Those parameters are then passed as-is to "),r("a",{attrs:{href:"https://github.com/bitcoin-core/HWI",target:"_blank",rel:"noopener noreferrer"}},[e._v("hwi"),r("OutboundLink")],1),e._v(" and the result is returned as a string.")]),e._v(" "),r("figure",[r("img",{attrs:{src:a(642),alt:"NuGet"}})]),e._v(" "),r("h2",{attrs:{id:"is-it-safe"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#is-it-safe"}},[e._v("#")]),e._v(" Is it safe?")]),e._v(" "),r("p",[e._v("Hardware wallets have been created to protect your money, even if your computer was compromised.")]),e._v(" "),r("p",[e._v("However, while it protects your money, it will not protect your privacy if you allow an untrusted application to access your public keys.\nThis is why BTCPayServer Vault always ask permission to user first before allowing any web application to access your hardware wallet.")]),e._v(" "),r("h2",{attrs:{id:"how-to-build"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how-to-build"}},[e._v("#")]),e._v(" How to build?")]),e._v(" "),r("p",[e._v("This is a two step process:")]),e._v(" "),r("ol",[r("li",[e._v("Install the latest version of the "),r("a",{attrs:{href:"https://dotnet.microsoft.com/download/dotnet-core/3.1",target:"_blank",rel:"noopener noreferrer"}},[e._v(".NET Core 3.1 SDK"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Run "),r("code",[e._v("dotnet build")])])]),e._v(" "),r("p",[e._v("If you want to run it for testing:")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" BTCPayServer.Vault\ndotnet run\n")])])]),r("h2",{attrs:{id:"documentation"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#documentation"}},[e._v("#")]),e._v(" Documentation")]),e._v(" "),r("p",[e._v("Video below explains how to use BTCPay Vault with BTCPay Server.")]),e._v(" "),r("a",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/hh_cm8MKl2g/hqdefault.jpg)"},attrs:{href:"https://www.youtube.com/watch?v=hh_cm8MKl2g","data-id":"hh_cm8MKl2g"}},[r("iframe",{attrs:{title:"YouTube","data-src":"https://www.youtube-nocookie.com/embed/hh_cm8MKl2g?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://blog.btcpayserver.org/btcpay-vault/",target:"_blank",rel:"noopener noreferrer"}},[e._v("BTCPay Vault announcement"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"/Vault"}},[e._v("Using BTCPay Vault with BTCPay Server")])])]),e._v(" "),r("h2",{attrs:{id:"licence"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#licence"}},[e._v("#")]),e._v(" Licence")]),e._v(" "),r("p",[e._v("This project is under MIT License.")]),e._v(" "),r("h2",{attrs:{id:"special-thanks"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#special-thanks"}},[e._v("#")]),e._v(" Special thanks")]),e._v(" "),r("p",[e._v("Special thanks to "),r("a",{attrs:{href:"https://github.com/zkSNACKs/WalletWasabi",target:"_blank",rel:"noopener noreferrer"}},[e._v("Wasabi Wallet"),r("OutboundLink")],1),e._v(", this code is based on their work, and as well to the bitcoin developers and "),r("a",{attrs:{href:"https://github.com/achow101",target:"_blank",rel:"noopener noreferrer"}},[e._v("achow101"),r("OutboundLink")],1),e._v(" for the "),r("a",{attrs:{href:"https://github.com/bitcoin-core/HWI",target:"_blank",rel:"noopener noreferrer"}},[e._v("HWI Project"),r("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=s.exports}}]);